montageDefine("78f4f03","generic-map",{dependencies:["./shim-object","./listen/map-changes","./listen/property-changes"],factory:function(e,t,n){"use strict";function s(){throw Error("Can't construct. GenericMap is a mixin.")}function a(e,t){this.key=e,this.value=t}var i=e("./shim-object"),r=e("./listen/map-changes"),o=e("./listen/property-changes");n.exports=s,i.addEach(s.prototype,r.prototype),i.addEach(s.prototype,o.prototype),s.prototype.addEach=function(e){return e&&i(e)===e&&("function"==typeof e.forEach?"function"==typeof e.keys?e.forEach(function(e,t){this.set(t,e)},this):e.forEach(function(e){this.set(e[0],e[1])},this):i.keys(e).forEach(function(t){this.set(t,e[t])},this)),this},s.prototype.get=function(e,t){var n=this.store.get(new this.Item(e));return n?n.value:arguments.length>1?t:this.getDefault(e)},s.prototype.set=function(e,t){var n=new this.Item(e,t),s=this.store.get(n),a=!1;return s?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,s.value),s.value=t,this.dispatchesMapChanges&&this.dispatchMapChange(e,t)):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,void 0),this.store.add(n)&&(this.length++,a=!0),this.dispatchesMapChanges&&this.dispatchMapChange(e,t)),a},s.prototype.add=function(e,t){return this.set(t,e)},s.prototype.has=function(e){return this.store.has(new this.Item(e))},s.prototype["delete"]=function(e){var t=new this.Item(e);if(this.store.has(t)){var n=this.store.get(t).value;return this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,n),this.store["delete"](t),this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(e,void 0),!0}return!1},s.prototype.clear=function(){this.dispatchesMapChanges&&this.forEach(function(e,t){this.dispatchBeforeMapChange(t,e)},this),this.store.clear(),this.length=0,this.dispatchesMapChanges&&this.forEach(function(e,t){this.dispatchMapChange(t,e)},this)},s.prototype.reduce=function(e,t,n){return this.store.reduce(function(t,s){return e.call(n,t,s.value,s.key,this)},t,this)},s.prototype.reduceRight=function(e,t,n){return this.store.reduceRight(function(t,s){return e.call(n,t,s.value,s.key,this)},t,this)},s.prototype.keys=function(){return this.map(function(e,t){return t})},s.prototype.values=function(){return this.map(Function.identity)},s.prototype.items=function(){return this.map(function(e,t){return[t,e]})},s.prototype.equals=function(e,t){if(t=t||i.equals,this===e)return!0;if(i.can(e,"every"))return e.length===this.length&&e.every(function(e,n){return t(this.get(n),e)},this);var n=i.keys(e);return n.length===this.length&&i.keys(e).every(function(n){return t(this.get(n),e[n])},this)},s.prototype.Item=a,a.prototype.equals=function(e){return i.equals(this.key,e.key)&&i.equals(this.value,e.value)},a.prototype.compare=function(e){return i.compare(this.key,e.key)}}});