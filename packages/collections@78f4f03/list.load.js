montageDefine("78f4f03","list",{dependencies:["./shim","./generic-collection","./generic-order","./listen/property-changes"],factory:function(e,t,n){"use strict";function s(e,t,n){if(!(this instanceof s))return new s(e,t,n);var a=this.head=new this.Node;a.next=a,a.prev=a,this.contentEquals=t||Object.equals,this.getDefault=n||Function.noop,this.length=0,this.addEach(e)}function a(e){this.head=e,this.at=e.next}function i(e){this.value=e,this.prev=null,this.next=null}n.exports=s,e("./shim");var r=e("./generic-collection"),o=e("./generic-order"),l=e("./listen/property-changes");Object.addEach(s.prototype,r.prototype),Object.addEach(s.prototype,o.prototype),Object.addEach(s.prototype,l.prototype),s.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.getDefault)},s.prototype.find=function(e,t){t=t||this.contentEquals;for(var n=this.head,s=n.next;s!==n;){if(t(s.value,e))return s;s=s.next}},s.prototype.findLast=function(e,t){t=t||this.contentEquals;for(var n=this.head,s=n.prev;s!==n;){if(t(s.value,e))return s;s=s.prev}},s.prototype.has=function(e,t){return!!this.find(e,t)},s.prototype.get=function(e,t){var n=this.find(e,t);return n?n.value:this.getDefault(e)},s.prototype["delete"]=function(e,t){var n=this.findLast(e,t);return n?(n["delete"](),this.length--,!0):!1},s.prototype.clear=function(){this.head.next=this.head.prev=this.head,this.length=0},s.prototype.add=function(e){return this.head.addBefore(new this.Node(e)),this.length++,!0},s.prototype.push=function(){for(var e=this.head,t=0;arguments.length>t;t++){var n=arguments[t],s=new this.Node(n);e.addBefore(s),this.length++}},s.prototype.unshift=function(){for(var e=this.head,t=0;arguments.length>t;t++){var n=arguments[t],s=new this.Node(n);e.addAfter(s),this.length++,e=s}},s.prototype.pop=function(){var e,t=this.head;return t.prev!==t&&(e=t.prev.value,t.prev["delete"](),this.length--),e},s.prototype.shift=function(){var e,t=this.head;return t.prev!==t&&(e=t.next.value,t.next["delete"](),this.length--),e},s.prototype.peek=function(){return this.head!==this.head.next?this.head.next.value:void 0},s.prototype.poke=function(e){this.head!==this.head.next?this.head.next.value=e:this.push(e)},s.prototype.one=function(){return this.peek()},s.prototype.scan=function(e,t){var n=this.head;if("number"==typeof e){var s=e;if(s>=0)for(e=n.next;s&&(s--,e=e.next,e!=n););else for(e=n;0>s&&(s++,e=e.prev,e!=n););return e}return e||t},s.prototype.slice=function(e,t){var n=[],s=this.head;for(e=this.scan(e,s.next),t=this.scan(t,s);e!==t&&e!==s;)n.push(e.value),e=e.next;return n},s.prototype.splice=function(e,t){return this.swap(e,t,Array.prototype.slice.call(arguments,2))},s.prototype.swap=function(e,t,n){var s=[],a=e;for(e=this.scan(e,this.head),void 0===t&&(t=1/0);t--&&t>=0&&e!==this.head;)s.push(e.value),e["delete"](),e=e.next,this.length--;if(n){null===a&&e===this.head&&(e=this.head.next);for(var i=0;n.length>i;i++){var r=new this.Node(n[i]);e.addBefore(r)}this.length+=n.length}return s},s.prototype.reverse=function(){var e=this.head;do{var t=e.next;e.next=e.prev,e.prev=t,e=e.next}while(e!==this.head);return this},s.prototype.reduce=function(e,t){for(var n=arguments[2],s=this.head,a=s.next;a!==s;)t=e.call(n,t,a.value,a,this),a=a.next;return t},s.prototype.reduceRight=function(e,t){for(var n=arguments[2],s=this.head,a=s.prev;a!==s;)t=e.call(n,t,a.value,a,this),a=a.prev;return t},s.prototype.iterate=function(){return new a(this.head)},a.prototype.next=function(){if(this.at===this.head)throw StopIteration;var e=this.at.value;return this.at=this.at.next,e},s.prototype.Node=i,i.prototype["delete"]=function(){this.prev.next=this.next,this.next.prev=this.prev},i.prototype.addBefore=function(e){var t=this.prev;this.prev=e,e.prev=t,t.next=e,e.next=this},i.prototype.addAfter=function(e){var t=this.next;this.next=e,e.next=t,t.prev=e,e.prev=this}}});