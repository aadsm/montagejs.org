function observe(e,t,n){var a;a="function"==typeof n?{change:n}:n,a=a||empty,a.source=e,a.sourcePath=t;var s=a.parameters=a.parameters||e,r=a.document,i=a.components,o=a.beforeChange,l=a.contentChange,c=new Scope(e,null,s,r,i,o),p=parse(t),u=compile(p);return l===!0&&(u=Observers.makeRangeContentObserver(u)),u(autoCancelPrevious(function(t){if(t){if("function"!=typeof l)return a.change.apply(e,arguments);if("function"==typeof l)return t.addRangeChangeListener(l),Observers.once(function(){t.removeRangeChangeListener(l)})}else;}),c)}var parse=require("./parse"),compile=require("./compile-observer"),Observers=require("./observers"),autoCancelPrevious=Observers.autoCancelPrevious,Scope=require("./scope");module.exports=observe;var empty={};