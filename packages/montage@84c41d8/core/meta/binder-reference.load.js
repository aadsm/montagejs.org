montageDefine("84c41d8","core/meta/binder-reference",{dependencies:["montage","core/promise","core/meta/remote-reference","core/meta/binder","core/logger"],factory:function(e,n){"use strict";e("montage").Montage;var t=e("core/promise").Promise,s=e("core/meta/remote-reference").RemoteReference,a=e("core/meta/binder");e("core/logger").logger("blueprint"),n.BinderReference=s.create(s,{constructor:{value:function(){this.super()}},identifier:{get:function(){return this._reference||(this._reference=this.referenceFromValue(this._value)),["binder",this._reference.binderName.toLowerCase(),"reference"].join("_")}},valueFromReference:{value:function(e,n){var s=e.binderName,o=e.binderModuleId,i=t.defer(),r=a.Binder.manager.binderForName(s);if(r)i.resolve(r);else try{var l=n,p=o.indexOf("/");if(p>0){var c=o.substring(0,p),u=n.mappings;c in u&&(o=o.substring(p+1),l=l.getPackage(u[c].location))}i=a.Binder.getBinderWithModuleId(o,l)}catch(h){i.reject(Error("Error cannot find Blueprint Binder "+o))}return i.promise}},referenceFromValue:{value:function(e){var n={};return n.binderName=e.name,n.binderModuleId=e.binderModuleId,n}}})}});