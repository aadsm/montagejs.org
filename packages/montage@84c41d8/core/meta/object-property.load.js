montageDefine("84c41d8","core/meta/object-property",{dependencies:["montage","core/exception","core/meta/blueprint","core/logger"],factory:function(e,n){"use strict";var t=e("montage").Montage,s=e("core/exception").Exception;e("core/meta/blueprint").Blueprint;var a=e("core/meta/blueprint").Binder,o=e("core/logger").logger("object-property");n.ObjectProperty=t.specialize({constructor:{value:function(){this.super()}},init:{serializable:!1,enumerable:!1,value:function(){return this}},apply:{value:function(e,n){if(!e.hasOwnProperty("blueprint")){var s;s=t.getInfoForObject(e),null!=s&&s.isInstance===!1&&(n===void 0?n=a.manager.blueprintForPrototype(s.objectName,s.moduleId):(n.prototypeName!==s.objectName||n.moduleId!==s.moduleId)&&(n=null),this.applyWithBlueprint(e,n))}}},applyWithBlueprint:{value:function(e,n){null!=n&&(this.addProperties(e,n),null!==n.parent&&this.apply(Object.getPrototypeOf(e),n))}},addProperties:{value:function(e,n){for(var s,a=0;s=n.propertyBlueprints[a++];)s.isDerived?this.addDerivedProperty(e,s):s.isAssociation?this.addAssociation(e,s):this.addProperty(e,s);t.defineProperty(e,"_blueprint",{serializable:!1,enumerable:!1,value:n}),t.defineProperty(e,"blueprint",{enumerable:!1,serializable:!1,get:function(){return this._blueprint}}),t.defineProperty(e,"blueprintGet",{serializable:!1,enumerable:!1,value:this.blueprintGet}),t.defineProperty(e,"blueprintSet",{serializable:!1,enumerable:!1,value:this.blueprintSet})}},addProperty:{value:function(e,n){this.addPropertyStorage(e,n),this.addPropertyDefinition(e,n),this.addPropertyStoredValue(e,n)}},addPropertyStorage:{value:function(e,n){var s="_"+n.name,a=null;e.hasOwnProperty(s)?o.isError&&o.error("We have an issue here. The developer should not override the storage value for "+s+"."):(a=n.isToMany?{value:[],enumerable:!1,serializable:!0,distinct:!0}:{value:null,enumerable:!1,serializable:!0},t.defineProperty(e,s,a))}},addPropertyDefinition:{value:function(e,n){var s=n.name,a=null;e.hasOwnProperty(s)?o.isDebug&&o.debug("The developer has already created the property "+s+" method do nothing."):(a={get:function(){return this.blueprintGet(s)},enumerable:!0,serializable:!1},n.readOnly||(a.set=function(e){return this.blueprintSet(s,e)}),t.defineProperty(e,s,a))}},blueprintGet:{value:function(e){var n=this.blueprint.propertyBlueprintForName(e),t="_"+n.name;return this[t]},enumerable:!1,serializable:!1},blueprintSet:{value:function(e,n){var t=this.blueprint.propertyBlueprintForName(e),a="_"+t.name;if(null==n&&t.denyDelete)throw(new s).initWithMessageTargetAndMethod("Deny Delete",this,t.name);this[a]=n},enumerable:!1,serializable:!1},addPropertyStoredValue:{value:function(e,n){var s=n.name+"$Storage",a=null;e.hasOwnProperty(s)?o.isError&&o.error("We have an issue here. The developer should not override the stored value for "+s+"."):(a=n.isToMany?{value:[],enumerable:!1,serializable:!1,distinct:!0}:{value:null,enumerable:!1,serializable:!1},t.defineProperty(e,s,a))}},addAssociation:{value:function(e,n){this.addPropertyStorage(e,n),this.addAssociationDefinition(e,n),this.addPropertyStoredValue(e,n)}},addAssociationDefinition:{value:function(e,n){n.isToMany?this.addToManyAssociationDefinition(e,n):this.addToOneAssociationDefinition(e,n)}},addToOneAssociationDefinition:{value:function(e,n){var s=n.name.toCapitalized(),a="addTo"+s;e.hasOwnProperty(a)?o.isError&&o.error("We have an issue here. The developer should not override the method "+a+"."):t.defineProperty(e,a,{serializable:!1,enumerable:!1,value:function(){return null}}),a="removeFrom"+s,e.hasOwnProperty(a)?o.isError&&o.error("We have an issue here. The developer should not override the method "+a+"."):t.defineProperty(e,a,{serializable:!1,enumerable:!1,value:function(){return null}}),a="clear"+s,e.hasOwnProperty(a)?o.isError&&o.error("We have an issue here. The developer should not override the method "+a+"."):t.defineProperty(e,a,{serializable:!1,enumerable:!1,value:function(){return null}})}},addToManyAssociationDefinition:{value:function(e,n){var s=n.name.toCapitalized(),a="addTo"+s;e.hasOwnProperty(a)?o.isError&&o.error("We have an issue here. The developer should not override the method "+a+"."):t.defineProperty(e,a,{serializable:!1,enumerable:!1,value:function(){return null}}),a="removeFrom"+s,e.hasOwnProperty(a)?o.isError&&o.error("We have an issue here. The developer should not override the method "+a+"."):t.defineProperty(e,a,{serializable:!1,enumerable:!1,value:function(){return null}}),a="clear"+s,e.hasOwnProperty(a)?o.isError&&o.error("We have an issue here. The developer should not override the method "+a+"."):t.defineProperty(e,a,{serializable:!1,enumerable:!1,value:function(){return null}})}},addDerivedProperty:{value:function(){}}})}});