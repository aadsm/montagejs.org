(function(n){"undefined"!=typeof bootstrap?bootstrap("core/url",n):n(require,exports)})(function(n,s){var e=["url","scheme","authorityRoot","authority","userInfo","user","password","domain","port","path","root","directory","file","search","query","hash"],a=RegExp("^(?:([^:/?#]+):)?(?:(//)((?:(([^:@]*):?([^@]*))?@)?([^:/?#]*)(?::(\\d*))?))?((/?)((?:[^?#/]*/)*)([^?#]*))(\\?([^#]*))?(?:#(.*))?$");s.parse=function(n){n+="";var s,t={},o=a.exec(n);for(s=0;o.length>s;s++)t[e[s]]=o[s]?o[s]:"";t.root=t.root||t.authorityRoot?"/":"",t.directories=t.directory.split("/"),""==t.directories[t.directories.length-1]&&t.directories.pop();var p=[];for(s=0;t.directories.length>s;s++){var l=t.directories[s];"."==l||(".."==l?p.length&&".."!=p[p.length-1]?p.pop():p.push(".."):p.push(l))}return t.directories=p,t.domains=t.domain.split("."),t},s.format=function(n){if(n===void 0)throw Error("UrlError: URL undefined for urls#format");if(n instanceof String||"string"==typeof n)return n;var s=n.domains?n.domains.join("."):n.domain,e=n.user||n.password?(n.user||"")+(n.password?":"+n.password:""):n.userInfo,a=e||s||n.port?(e?e+"@":"")+(s||"")+(n.port?":"+n.port:""):n.authority,t=n.directories?n.directories.join("/"):n.directory,o=t||n.file?(t?t+"/":"")+(n.file||""):n.path,p=n.query?"?"+n.query:n.search||"";return(n.scheme?n.scheme+":":"")+(a?"//"+a:"")+(n.root||a&&o?"/":"")+(o?o:"")+p+(n.hash?"#"+n.hash:"")||n.url||""},s.resolveObject=function(n,e){if(!n)return e;if(n=s.parse(n),e=s.parse(e),""==e.url)return n;if(delete n.url,delete n.authority,delete n.domain,delete n.userInfo,delete n.path,delete n.directory,delete n.search,delete n.query,delete n.hash,e.authorityRoot)e.scheme||(e.scheme=n.scheme),n=e;else if(e.scheme&&e.scheme!=n.scheme||e.authority&&e.authority!=n.authority)n=e;else if(e.root)n.directories=e.directories;else{var a=n.directories.concat(e.directories);n.directories=[];for(var t=0;a.length>t;t++){var o=a[t];""==o||"."==o||(".."==o?n.directories.length?n.directories.pop():n.directories.push(".."):n.directories.push(o))}"."==e.file?e.file="":".."==e.file&&(n.directories.pop(),e.file="")}return e.root&&(n.root=e.root),e.protcol&&(n.scheme=e.scheme),(e.path||!e.hash)&&(n.file=e.file),e.query&&(n.query=e.query),e.hash&&(n.hash=e.hash),n},s.relativeObject=function(n,e){if(e=s.parse(e),n=s.parse(n),delete e.url,e.scheme==n.scheme&&e.authority==n.authority&&(delete e.scheme,delete e.authority,delete e.userInfo,delete e.user,delete e.password,delete e.domain,delete e.domains,delete e.port,!!e.root==!!n.root&&(!e.root||e.directories[0]==n.directories[0]))){for(delete e.path,delete e.root,delete e.directory;n.directories.length&&e.directories.length&&e.directories[0]==n.directories[0];)e.directories.shift(),n.directories.shift();for(;n.directories.length;)n.directories.shift(),e.directories.unshift("..");e.root||e.directories.length||e.file||!n.file||e.directories.push("."),n.file==e.file&&delete e.file,n.query==e.query&&delete e.query,n.hash==e.hash&&delete e.hash}return e},s.resolve=function(n,e){return s.format(s.resolveObject(n,e))},s.relative=function(n,e){return s.format(s.relativeObject(n,e))}});