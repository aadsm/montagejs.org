montageDefine("a9d7aed","queue",{dependencies:["./q"],factory:function(e,t,n){function s(){var e=a.defer(),t=a.defer();return{put:function(t){var n=a.defer();e.resolve({head:t,tail:n.promise}),e.resolve=n.resolve},get:function(){var n=e.promise.get("head");return e.promise=e.promise.get("tail"),n.fail(function(e){throw t.resolve(e),e})},closed:t.promise,close:function(n){n=n||Error("Can't get value from closed queue");var s={head:a.reject(n)};return s.tail=s,e.resolve(s),t.promise}}}var a=e("./q");n.exports=s}});