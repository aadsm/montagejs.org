montageDefine("545ead3","test/simple/test-stream2-readable-empty-buffer-no-eof",{dependencies:["../common","assert","../../readable"],factory:function(e){function t(){function e(){for(var e;null!==(e=t.read());)i.push(e+"")}var t=new s,n=new Buffer(5);n.fill("x");var r=5;t._read=function(){switch(r--){case 0:return t.push(null);case 1:return t.push(n);case 2:return setTimeout(t.read.bind(t,0),10),t.push(new Buffer(0));case 3:return setTimeout(t.read.bind(t,0),10),process.nextTick(function(){return t.push(new Buffer(0))});case 4:return setTimeout(t.read.bind(t,0),10),setTimeout(function(){return t.push(new Buffer(0))});case 5:return setTimeout(function(){return t.push(n)});default:throw Error("unreachable")}};var i=[];t.on("readable",e),t.on("end",function(){i.push("EOF")}),e(),process.on("exit",function(){a.deepEqual(i,["xxxxx","xxxxx","EOF"]),console.log("ok")})}function n(){function e(){for(var e;null!==(e=t.read());)r.push(e+"")}var t=new s({encoding:"base64"}),n=5;t._read=function(){return n--?t.push(new Buffer("x")):t.push(null)};var r=[];t.on("readable",e),t.on("end",function(){r.push("EOF")}),e(),process.on("exit",function(){a.deepEqual(r,["eHh4","eHg=","EOF"]),console.log("ok")})}e("../common");var a=e("assert"),s=e("../../readable").Readable;t(),/^v0\.[0-8]\./.test(process.version)||n()}});